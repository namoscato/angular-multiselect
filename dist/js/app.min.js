// AngularJS Multiselect
// https://github.com/namoscato/angular-multiselect
//
// Version: 1.3.6
// License: MIT
!function(){"use strict";angular.module("amo.multiselect",["ui.bootstrap.dropdown"])}(),function(){"use strict";angular.module("multiselectDemo",["amo.multiselect"])}(),function(){"use strict";angular.module("amo.multiselect").constant("amoMultiselectConfig",{conjunctionText:"and",deselectAllText:"Deselect All",filterText:"Search...",isDeselectAllEnabled:!0,isDisabled:!1,isFilterEnabled:!0,isSelectAllEnabled:!0,limitTo:500,selectAllText:"Select All",selectedSuffixSingularText:"item",selectedSuffixText:"items",selectText:"Select..."})}(),function(){"use strict";angular.module("amo.multiselect").directive("amoMultiselectDropdown",function(){return{link:function(e,t,l){var n=e.multiselectDropdown;n.getSelectAllLabel=function(){{if(n.state.isSelectAllCheckboxVisible)return n.isAllSelected?n.text.deselectAll:n.text.selectAll;if(n.state.isSelectAllEnabled)return n.text.selectAll}return n.text.deselectAll},n.toggleAllSelectedState=function(){var t;n.isAllSelected=!n.isAllSelected,t=!!n.state.isSelectAllEnabled&&(!n.state.isDeselectAllEnabled||n.isAllSelected);angular.forEach(n.optionsFiltered,function(e){angular.forEach(e,function(e){e.selected=t})}),n.exposeSelectedOptions()},n.toggleSelectedState=function(e){e.selected=!e.selected,n.exposeSelectedOptions()}},restrict:"E",templateUrl:"amo/multiselect/multiselect-dropdown.html"}})}(),function(){"use strict";function e(O,x,A,T,v,E,F){return{link:function(l,e,n,t){var o,i=S("conjunctionText"),s=n.label?x(n.label):angular.noop,r=S("isDeselectAllEnabled",!0),u=S("isSelectAllEnabled",!0),c=[],a=n.onChange?x(n.onChange):angular.noop,p=n.onToggleDropdown?x(n.onToggleDropdown):angular.noop,d=[],g=new T(n.options,l),f=l.$new(),m={name:n.name};function b(e){c.push(g.getLabel(e))}function w(){var n,o,i;c.length=0,m.groupOptions={},m.optionsFiltered={},m.groups=g.getGroups(),angular.forEach(g.getOptions(),function(e,l){angular.forEach(e,function(e,t){for(o=!1,i=g.getValue(e),n=0;n<d.length;n++)if(angular.equals(d[n],i)){o=!0,b(e);break}angular.isUndefined(m.groupOptions[l])&&(m.groupOptions[l]=[]),m.groupOptions[l].push({id:t,label:g.getLabel(e),value:i,selected:o})})}),D()}function h(){return d.length}function S(e,t){return angular.isDefined(n[e])?t?x(n[e])(l):n[e]:v[e]}function D(){var e;return e=0===d.length?n.selectText||v.selectText:0<c.length&&angular.isDefined(c[0])?E.joinLabels(c,i):E.pluralize(d.length,n.selectedSuffixText,n.selectedSuffixSingularText||n.selectedSuffixText),m.selectedLabel=e,angular.isFunction(s.assign)&&s.assign(l,e),e}(f.multiselectDropdown=m).groups=[],m.groupOptions={},m.optionsFiltered={},m.filter={},m.limit=S("limitTo",!0),m.state={isDeselectAllEnabled:r,isFilterEnabled:S("isFilterEnabled",!0),isSelectAllEnabled:u,isSelectAllVisible:u||r,isSelectAllCheckboxVisible:u&&r},m.text={deselectAll:S("deselectAllText"),filter:S("filterText"),selectAll:S("selectAllText")},m.countOptionsAfterLimit=function(e){if(angular.isUndefined(m.limit))return 0;var t=m.optionsFiltered[e].length-m.limit;return 0<t?t:0},m.exposeSelectedOptions=function(){var n;c.length=0,d=[],angular.forEach(m.groupOptions,function(e,l){angular.forEach(e,function(e,t){e.selected&&(b(n=g.getOption(t,l)),d.push(g.getValue(n)))})}),o=!0,t.$setViewValue(d),a(f,{label:D()})},m.getSelectedCount=h,m.hasSelectedMultipleItems=function(){return 1<h()},m.isGroupVisible=function(e){return!!g.isGrouped()&&0<F(m.groupOptions[e],m.filter).length},m.isSelectAllToggleDisabled=function(){{if(!u)return 0===d.length;if(!r)return d.length===g.getOptionsCount()}return!1},m.onToggleDropdown=function(e){e||A(function(){m.filter={}});p(f,{isOpen:e})},function(){e.append(O("<amo-multiselect-dropdown></amo-multiselect-dropdown>")(f)),l.$on("$destroy",function(){f.$destroy()}),l.$watch(g.getOptionsExpression(),function(e){g.setOptions(e),w()},!0),n.isDisabled&&l.$watch(n.isDisabled,function(e){m.state.isDisabled=Boolean(e)});l.$watch(function(){return t.$modelValue},function(e){o?o=!1:(d=angular.isArray(e)?e:[],w())},!0),t.$isEmpty=function(e){return!angular.isArray(e)||0===e.length},angular.isDefined(m.limit)&&!Boolean(m.limit)&&(m.limit=void 0)}()},require:"ngModel",restrict:"E"}}e.$inject=["$compile","$parse","$timeout","AmoMultiselectFactory","amoMultiselectConfig","amoMultiselectFormatService","filterFilter"],angular.module("amo.multiselect").directive("amoMultiselect",e)}(),function(){"use strict";function e(r){var u=/^\s*(?:([\s\S]+?)\s+as\s+)?([\s\S]+?)(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+([\$\w][\$\w]*)\s+in\s+([\s\S]+?)\s*$/;return function(t,l){var n,e=this;function o(e){return s()?n.groupFunction(l,i(e)):null}function i(e){var t={};return t[n.value]=e,t}function s(){return null!==n.groupFunction}return e.getGroup=o,e.getGroups=function(e){return n.groups},e.getLabel=function(e){return n.labelFunction(l,i(e))},e.getOption=function(e,t){angular.isUndefined(t)&&(t=null);return n.groupOptions[t][e]},e.getOptions=function(){return n.groupOptions},e.getOptionsCount=function(){return n.optionsCount},e.getOptionsExpression=function(){return n.optionsExpression},e.getValue=function(e){return n.selectFunction(l,i(e))},e.isGrouped=s,e.setOptions=function(e){var t;if(angular.isArray(e))return n.groups=[],n.groupOptions={},n.optionsCount=e.length,e.forEach(function(e){t=o(e),angular.isUndefined(n.groupOptions[t])&&(n.groups.push(t),n.groupOptions[t]=[]),n.groupOptions[t].push(e)}),n.groupOptions;throw new Error('Expected "'+n.optionsExpression+'" to be Array')},function(){var e=t.match(u);if(null===e)throw new Error('Expected "'+t+'" to be in form of "[_select_ as] _label_ [group by _group_] for _value_ in _array_"');n={groupFunction:angular.isDefined(e[3])?r(e[3]):null,labelFunction:r(e[2]),optionsExpression:e[5],selectFunction:r(angular.isDefined(e[1])?e[1]:e[4]),value:e[4]}}(),e}}e.$inject=["$parse"],angular.module("amo.multiselect").factory("AmoMultiselectFactory",e)}(),function(){"use strict";function e(o){this.joinLabels=function(e,t){var l,n;if(1===e.length)return e[0];n=e.pop(),l=e.join(", "),1<e.length&&(l+=",");return l+" "+t+" "+n},this.pluralize=function(e,t,l){var n=e+" ";n+=1===e?l||o.selectedSuffixSingularText:t||o.selectedSuffixText;return n}}e.$inject=["amoMultiselectConfig"],angular.module("amo.multiselect").service("amoMultiselectFormatService",e)}(),function(){"use strict";function e(t){var l=this;l.modelObject=[{id:2,label:"Two"}],l.modelObjectGrouped=[{category:"Pizza",id:2,label:"Two"}],l.modelObjectProperty=[2],l.modelStringTwo=["One","Two"],l.modelLongString=["One","Two"],l.optionsObject=[{id:1,label:"One"},{id:2,label:"Two"},{id:3,label:"Three"}],l.optionsObjectDefer=[],l.optionsObjectGrouped=[{category:"Pizza",id:1,label:"One"},{category:"Pizza",id:2,label:"Two"},{category:"Hamburger",id:3,label:"Three"}],l.optionsString=["One","Two","Three"],l.optionsLongString=["One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen","Twenty"],l.addObject=function(){l.optionsObject.push({id:l.optionsObject.length+1,label:"Option "+(l.optionsObject.length+1)})},l.clear=function(){l.modelObjectProperty=null},l.onChange=function(e){console.log("onChange",e)},l.onToggleDropdown=function(e){console.log("onToggleDropdown",e),e&&t(function(){l.optionsObjectDefer=l.optionsObject},300)}}e.$inject=["$timeout"],angular.module("multiselectDemo").controller("AppController",e)}(),angular.module("amo.multiselect").run(["$templateCache",function(e){e.put("amo/multiselect/multiselect-dropdown.html",'<div class="btn-group btn-group-multiselect" auto-close="outsideClick" ng-attr-title="{{ multiselectDropdown.selectedLabel }}" ng-class="{ \'state-selected-multiple\': multiselectDropdown.hasSelectedMultipleItems() }" on-toggle="multiselectDropdown.onToggleDropdown(open)" uib-dropdown> <button type="button" class="btn btn-default" ng-attr-id="{{:: multiselectDropdown.name }}" ng-disabled="multiselectDropdown.state.isDisabled" uib-dropdown-toggle> <span class="text" ng-bind="multiselectDropdown.selectedLabel"></span> <span class="badge" ng-bind="multiselectDropdown.getSelectedCount()"></span> <span class="caret"></span> </button> <div uib-dropdown-menu> <input type="text" class="form-control" ng-if="::multiselectDropdown.state.isFilterEnabled" ng-model="multiselectDropdown.filter.label" placeholder="{{ ::multiselectDropdown.text.filter }}"> <ul class="dropdown-menu-list list-unstyled"> <li ng-if="::multiselectDropdown.state.isSelectAllVisible"> <a ng-class="{ \'text-muted\': multiselectDropdown.isSelectAllToggleDisabled() }" ng-click="multiselectDropdown.toggleAllSelectedState()"> <input type="checkbox" ng-if="::multiselectDropdown.state.isSelectAllCheckboxVisible" ng-model="multiselectDropdown.isAllSelected"> <span ng-bind="multiselectDropdown.getSelectAllLabel()"></span> </a> </li> <li class="divider" ng-if="::multiselectDropdown.state.isSelectAllVisible"></li> <li class="dropdown-header" ng-bind="group" ng-if="multiselectDropdown.isGroupVisible(group)" ng-repeat-start="group in multiselectDropdown.groups"> </li> <li ng-repeat="option in (multiselectDropdown.optionsFiltered[group] = (multiselectDropdown.groupOptions[group] | filter : multiselectDropdown.filter)) | limitTo: multiselectDropdown.limit"> <a ng-attr-title="{{ option.label }}" ng-click="multiselectDropdown.toggleSelectedState(option)"> <input type="checkbox" ng-model="option.selected"> <span ng-bind="option.label"></span> </a> </li> <li class="dropdown-is-over-limit" ng-class="{ \'dropdown-is-group-limit\': group !== null }" ng-show="multiselectDropdown.countOptionsAfterLimit(group)"> <span ng-bind="multiselectDropdown.countOptionsAfterLimit(group)"></span> more result(s).<span ng-if="::multiselectDropdown.state.isFilterEnabled"><br>Search to reveal more.</span> </li> <li ng-repeat-end></li> </ul> </div> </div> ')}]);